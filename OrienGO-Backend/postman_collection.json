{
  "info": {
    "name": "OrienGO Tests RIASEC",
    "description": "Collection pour tester le système complet de tests RIASEC",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080"
    },
    {
      "key": "testId",
      "value": ""
    },
    {
      "key": "studentId",
      "value": ""
    },
    {
      "key": "resultId",
      "value": ""
    }
  ],
  "item": [
    {
      "name": "1. Tests FAST",
      "item": [
        {
          "name": "Créer test FAST",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/tests/start?type=FAST",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tests", "start"],
              "query": [
                {
                  "key": "type",
                  "value": "FAST"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Jean\",\n  \"lastName\": \"Dupont\",\n  \"email\": \"jean.dupont@email.com\",\n  \"phoneNumber\": \"0123456789\",\n  \"age\": \"25\",\n  \"gender\": \"MALE\",\n  \"school\": \"Université de Paris\",\n  \"fieldOfStudy\": \"Informatique\",\n  \"educationLevel\": \"BACHELOR\",\n  \"location\": \"Paris, France\",\n  \"profileVisibility\": \"PUBLIC\",\n  \"accountPrivacy\": \"PUBLIC\",\n  \"messagePermission\": \"ALLOWED\"\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set(\"testId\", response.id);",
                  "    pm.environment.set(\"studentId\", response.studentId);",
                  "    console.log(\"Test créé avec ID:\", response.id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Soumettre test FAST",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/tests/{{testId}}/submit",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tests", "{{testId}}", "submit"]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"1\": 4, \"2\": 5, \"3\": 3, \"4\": 4, \"5\": 5, \"6\": 2,\n  \"7\": 4, \"8\": 3, \"9\": 5, \"10\": 4, \"11\": 3, \"12\": 4,\n  \"13\": 5, \"14\": 2, \"15\": 4, \"16\": 3, \"17\": 5, \"18\": 4\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set(\"resultId\", response.id);",
                  "    console.log(\"Résultat créé avec ID:\", response.id);",
                  "}"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "2. Tests COMPLETE",
      "item": [
        {
          "name": "Créer test COMPLETE",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/tests/start?type=COMPLETE",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tests", "start"],
              "query": [
                {
                  "key": "type",
                  "value": "COMPLETE"
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Marie\",\n  \"lastName\": \"Martin\",\n  \"email\": \"marie.martin@email.com\",\n  \"phoneNumber\": \"0123456789\",\n  \"age\": \"22\",\n  \"gender\": \"FEMALE\",\n  \"school\": \"Université de Lyon\",\n  \"fieldOfStudy\": \"Psychologie\",\n  \"educationLevel\": \"BACHELOR\",\n  \"location\": \"Lyon, France\",\n  \"profileVisibility\": \"PUBLIC\",\n  \"accountPrivacy\": \"PUBLIC\",\n  \"messagePermission\": \"ALLOWED\"\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set(\"testId\", response.id);",
                  "    pm.environment.set(\"studentId\", response.studentId);",
                  "    console.log(\"Test COMPLETE créé avec ID:\", response.id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Soumettre test COMPLETE",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/tests/{{testId}}/submit",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tests", "{{testId}}", "submit"]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"1\": 4, \"2\": 5, \"3\": 4, \"4\": 3, \"5\": 4, \"6\": 3, \"7\": 4, \"8\": 5, \"9\": 4, \"10\": 3,\n  \"11\": 5, \"12\": 4, \"13\": 5, \"14\": 4, \"15\": 5, \"16\": 4, \"17\": 5, \"18\": 4, \"19\": 3, \"20\": 4,\n  \"21\": 2, \"22\": 3, \"23\": 2, \"24\": 3, \"25\": 2, \"26\": 3, \"27\": 2, \"28\": 3, \"29\": 2, \"30\": 3,\n  \"31\": 5, \"32\": 4, \"33\": 5, \"34\": 4, \"35\": 5, \"36\": 4, \"37\": 5, \"38\": 4, \"39\": 5, \"40\": 4,\n  \"41\": 3, \"42\": 2, \"43\": 3, \"44\": 2, \"45\": 3, \"46\": 2, \"47\": 3, \"48\": 2, \"49\": 1, \"50\": 2,\n  \"51\": 4, \"52\": 3, \"53\": 4, \"54\": 3, \"55\": 4, \"56\": 3, \"57\": 4, \"58\": 3, \"59\": 4, \"60\": 3\n}"
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set(\"resultId\", response.id);",
                  "    console.log(\"Résultat COMPLETE créé avec ID:\", response.id);",
                  "}"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "3. Consultation des tests",
      "item": [
        {
          "name": "Lister tous les tests",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/tests",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tests"]
            }
          }
        },
        {
          "name": "Récupérer un test spécifique",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/tests/{{testId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tests", "{{testId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "4. Consultation des résultats",
      "item": [
        {
          "name": "Lister tous les résultats",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/test-results",
              "host": ["{{baseUrl}}"],
              "path": ["api", "test-results"]
            }
          }
        },
        {
          "name": "Récupérer un résultat par ID",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/test-results/{{resultId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "test-results", "{{resultId}}"]
            }
          }
        },
        {
          "name": "Récupérer le résultat d'un test",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/test-results/test/{{testId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "test-results", "test", "{{testId}}"]
            }
          }
        },
        {
          "name": "Récupérer tous les résultats d'un étudiant",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/test-results/student/{{studentId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "test-results", "student", "{{studentId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "5. Tests d'erreurs",
      "item": [
        {
          "name": "Test incomplet (réponses manquantes)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/tests/{{testId}}/submit",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tests", "{{testId}}", "submit"]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"1\": 4, \"2\": 5, \"3\": 3\n}"
            }
          }
        },
        {
          "name": "Test avec réponses invalides",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/tests/{{testId}}/submit",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tests", "{{testId}}", "submit"]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"1\": 6, \"2\": 0, \"3\": 3, \"4\": 4, \"5\": 5, \"6\": 2,\n  \"7\": 4, \"8\": 3, \"9\": 5, \"10\": 4, \"11\": 3, \"12\": 4,\n  \"13\": 5, \"14\": 2, \"15\": 4, \"16\": 3, \"17\": 5, \"18\": 4\n}"
            }
          }
        }
      ]
    }
  ]
} 