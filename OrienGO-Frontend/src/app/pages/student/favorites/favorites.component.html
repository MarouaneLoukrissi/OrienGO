<div class="min-h-screen bg-orange-50">
  <div class="mx-auto w-full md-lg:max-w-[88rem] px-4 py-6 sm:px-6 sm:py-8 lg:px-8">
    <!-- Header Section -->
    <div class="text-center mb-8 sm:mb-12">
      <div class="w-20 h-20 sm:w-[86px] sm:h-[86px] md:w-24 md:h-24 inline-flex items-center justify-center bg-orange-500 rounded-full mb-4">
        <svg class="w-10 h-10 sm:w-12 sm:h-12 md:w-[56px] md:h-[56px] text-white" viewBox="0 0 42 38" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M21 6.50038C17.2512 2.13158 10.987 0.781438 6.29006 4.78194C1.59308 8.78244 0.931812 15.471 4.62037 20.2025C7.68717 24.1362 16.9683 32.4331 20.0102 35.1185C20.3504 35.4189 20.5206 35.5692 20.7192 35.6281C20.8923 35.6796 21.0819 35.6796 21.2552 35.6281C21.4538 35.5692 21.6237 35.4189 21.9642 35.1185C25.006 32.4331 34.2871 24.1362 37.354 20.2025C41.0425 15.471 40.4619 8.74036 35.6842 4.78194C30.9065 0.823522 24.7488 2.13158 21 6.50038Z" stroke="currentColor" stroke-width="3.6" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <h1 class="text-sm xxs:text-base xs:text-xl smaller:text-2xl sm:text-4xl font-bold text-gray-800 mb-4">
        {{ 'PREFERENCES_FAVORITES.TITLE' | translate }}
      </h1>
      <p class="text-gray-600 text-base sm:text-lg mb-8 max-w-xl sm:max-w-2xl mx-auto sm:px-0">
        {{ 'PREFERENCES_FAVORITES.DESCRIPTION' | translate }}
      </p>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="flex justify-center items-center py-12">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"></div>
    </div>

    <!-- Error State -->
    <div *ngIf="errorMessage" class="bg-red-50 border border-red-200 rounded-lg p-4 mb-8">
      <div class="flex">
        <svg class="w-5 h-5 text-red-400 mr-2 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
        </svg>
        <p class="text-red-700">{{ errorMessage }}</p>
      </div>
    </div>

    <!-- Content -->
    <div *ngIf="!isLoading && !errorMessage">
      <!-- Favorite Recommendation Jobs Section -->
      <div class="mb-16">
        <div class="flex items-start sm:items-center mb-8">
          <svg class="mt-1 sm:mt-0 shrink-0 mr-2 sm:mr-3 text-orange-500 w-5 h-5 xxs:w-6 xxs:h-6 sm:w-7 sm:h-7" viewBox="0 0 28 26" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M13.0256 2.88137C13.3342 2.18886 13.4886 1.84261 13.7036 1.73598C13.8902 1.64334 14.1094 1.64334 14.2961 1.73598C14.511 1.84261 14.6654 2.18886 14.9741 2.88137L17.4328 8.39728C17.5241 8.602 17.5697 8.70436 17.6404 8.78274C17.7028 8.8521 17.7792 8.90758 17.8644 8.94556C17.9608 8.98849 18.0722 9.00025 18.2952 9.02377L24.3009 9.65765C25.0549 9.73722 25.4318 9.77701 25.5997 9.94846C25.7454 10.0974 25.8132 10.3059 25.7828 10.5121C25.7478 10.7494 25.4662 11.0032 24.903 11.5108L20.4168 15.5537C20.2504 15.7037 20.167 15.7788 20.1144 15.8701C20.0677 15.951 20.0385 16.0408 20.0288 16.1336C20.0177 16.2385 20.0409 16.3481 20.0874 16.5674L21.3405 22.475C21.4978 23.2168 21.5765 23.5876 21.4653 23.8001C21.3686 23.9849 21.1913 24.1137 20.9858 24.1485C20.7493 24.1885 20.4209 23.9992 19.7641 23.6204L14.5328 20.603C14.3386 20.491 14.2416 20.4352 14.1384 20.4132C14.047 20.3938 13.9526 20.3938 13.8613 20.4132C13.7581 20.4352 13.661 20.491 13.4669 20.603L8.23558 23.6204C7.5788 23.9992 7.25042 24.1885 7.01387 24.1485C6.80839 24.1137 6.631 23.9849 6.53442 23.8001C6.42323 23.5876 6.50188 23.2168 6.6592 22.475L7.91222 16.5674C7.95872 16.3481 7.98198 16.2385 7.97094 16.1336C7.96116 16.0408 7.932 15.951 7.88534 15.8701C7.8326 15.7788 7.74935 15.7037 7.58286 15.5537L3.0967 11.5108C2.53348 11.0032 2.25187 10.7494 2.21686 10.5121C2.18646 10.3059 2.2542 10.0974 2.39999 9.94846C2.56783 9.77701 2.94483 9.73722 3.69883 9.65765L9.70455 9.02377C9.92746 9.00025 10.0389 8.98849 10.1353 8.94556C10.2205 8.90758 10.2969 8.8521 10.3594 8.78274C10.43 8.70436 10.4756 8.602 10.5669 8.39728L13.0256 2.88137Z" stroke="currentColor" stroke-width="2.56" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <h2 class="text-xl xxs:text-2xl font-bold text-gray-900">
            {{ 'PREFERENCES_FAVORITES.FAVORITE_JOBS.TITLE' | translate }} ({{ favoriteRecommendationJobs.length }})
          </h2>
        </div>

        <!-- Empty State for Recommendation Jobs -->
        <div *ngIf="favoriteRecommendationJobs.length === 0" class="text-center py-12">
          <svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2m-8 0V6a2 2 0 00-2 2v6"></path>
          </svg>
          <h3 class="text-lg font-medium text-gray-900 mb-2">No favorite recommendation jobs yet</h3>
          <p class="text-gray-500">Start favoriting recommended jobs to see them here.</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6" *ngIf="favoriteRecommendationJobs.length > 0">
          <div *ngFor="let job of favoriteRecommendationJobs" class="bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow duration-300 p-3 xxs:p-6">
            <div class="flex flex-col flex-wrap smaller-sm-md:flex-row smaller-sm-md:justify-between items-start mb-4 smaller-sm-md:gap-4">
              <div class="flex-1">
                <h3 class="text-xl font-semibold text-gray-900 mb-2">{{ job.title }}</h3>
                <p class="text-lg text-gray-500 font-medium mb-1">{{ job.category || 'Category not specified' }}</p>
                <p class="text-gray-500 mb-3">{{ job.salaryRange || 'Salary not specified' }}</p>
              </div>
            </div>

            <div class="mb-6">
              <p class="text-gray-500 mb-2">{{ 'PREFERENCES_FAVORITES.FAVORITE_JOBS.SALARY' | translate }}: {{ job.salaryRange || 'Not specified' }}</p>
              <p class="text-gray-500 mb-2">{{ 'PREFERENCES_FAVORITES.FAVORITE_JOBS.ADDED_ON' | translate }}: {{ formatDate(job.createdAt) }}</p>
            </div>

            <div class="flex flex-col smaller:flex-row justify-center items-center flex-wrap gap-3">
              <button
                class="min-w-full smaller:min-w-0 flex-1 bg-orange-500 hover:bg-orange-600 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2"
                (click)="viewRecommendationJobDetails(job)"
              >
                {{ 'PREFERENCES_FAVORITES.FAVORITE_JOBS.VIEW_DETAILS' | translate }}
              </button>
              <button
                class="min-w-full smaller:min-w-0 flex-shrink-0 border-2 border-red-500 text-red-500 hover:bg-red-50 p-3 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"
                (click)="removeFavoriteRecommendationJob(job.id!)"
                [disabled]="isRemoving"
              >
                <svg class="w-5 h-5 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Favorite Trainings Section -->
      <div class="mb-16">
        <div class="flex items-start sm:items-center mb-8">
          <svg class="mt-1 sm:mt-0 shrink-0 mr-2 sm:mr-3 text-orange-500 w-5 h-5 xxs:w-6 xxs:h-6 sm:w-7 sm:h-7" viewBox="0 0 28 26" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M13.0256 2.88137C13.3342 2.18886 13.4886 1.84261 13.7036 1.73598C13.8902 1.64334 14.1094 1.64334 14.2961 1.73598C14.511 1.84261 14.6654 2.18886 14.9741 2.88137L17.4328 8.39728C17.5241 8.602 17.5697 8.70436 17.6404 8.78274C17.7028 8.8521 17.7792 8.90758 17.8644 8.94556C17.9608 8.98849 18.0722 9.00025 18.2952 9.02377L24.3009 9.65765C25.0549 9.73722 25.4318 9.77701 25.5997 9.94846C25.7454 10.0974 25.8132 10.3059 25.7828 10.5121C25.7478 10.7494 25.4662 11.0032 24.903 11.5108L20.4168 15.5537C20.2504 15.7037 20.167 15.7788 20.1144 15.8701C20.0677 15.951 20.0385 16.0408 20.0288 16.1336C20.0177 16.2385 20.0409 16.3481 20.0874 16.5674L21.3405 22.475C21.4978 23.2168 21.5765 23.5876 21.4653 23.8001C21.3686 23.9849 21.1913 24.1137 20.9858 24.1485C20.7493 24.1885 20.4209 23.9992 19.7641 23.6204L14.5328 20.603C14.3386 20.491 14.2416 20.4352 14.1384 20.4132C14.047 20.3938 13.9526 20.3938 13.8613 20.4132C13.7581 20.4352 13.661 20.491 13.4669 20.603L8.23558 23.6204C7.5788 23.9992 7.25042 24.1885 7.01387 24.1485C6.80839 24.1137 6.631 23.9849 6.53442 23.8001C6.42323 23.5876 6.50188 23.2168 6.6592 22.475L7.91222 16.5674C7.95872 16.3481 7.98198 16.2385 7.97094 16.1336C7.96116 16.0408 7.932 15.951 7.88534 15.8701C7.8326 15.7788 7.74935 15.7037 7.58286 15.5537L3.0967 11.5108C2.53348 11.0032 2.25187 10.7494 2.21686 10.5121C2.18646 10.3059 2.2542 10.0974 2.39999 9.94846C2.56783 9.77701 2.94483 9.73722 3.69883 9.65765L9.70455 9.02377C9.92746 9.00025 10.0389 8.98849 10.1353 8.94556C10.2205 8.90758 10.2969 8.8521 10.3594 8.78274C10.43 8.70436 10.4756 8.602 10.5669 8.39728L13.0256 2.88137Z" stroke="currentColor" stroke-width="2.56" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <h2 class="text-xl xxs:text-2xl font-bold text-gray-900">
            {{ 'PREFERENCES_FAVORITES.FAVORITE_TRAININGS.TITLE' | translate }} ({{ favoriteTrainings.length }})
          </h2>
        </div>

        <!-- Empty State for Trainings -->
        <div *ngIf="favoriteTrainings.length === 0" class="text-center py-12">
          <svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
          </svg>
          <h3 class="text-lg font-medium text-gray-900 mb-2">No favorite trainings yet</h3>
          <p class="text-gray-500">Start favoriting training programs to see them here.</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6" *ngIf="favoriteTrainings.length > 0">
          <div *ngFor="let training of favoriteTrainings" class="bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow duration-300 p-3 xxs:p-6">
            <div class="flex flex-col flex-wrap smaller-sm-md:flex-row smaller-sm-md:justify-between items-start mb-4 smaller-sm-md:gap-4">
              <div class="flex-1 max-w-full">
                <h3 class="text-xl font-semibold text-gray-900 mb-2 break-words block max-w-full">{{ training.name }}</h3>
                <p class="text-lg text-gray-500 font-medium mb-1 break-words block max-w-full">{{ training.type }}</p>
                <p class="text-gray-500 mb-3 break-words block max-w-full">{{ training.duration || 'Duration not specified' }}</p>
              </div>
            </div>

            <div class="mb-6">
              <p class="text-gray-500 mb-2">{{ 'PREFERENCES_FAVORITES.FAVORITE_TRAININGS.ADDED_ON' | translate }}: {{ formatDate(training.createdAt) }}</p>
            </div>

            <div class="flex flex-col smaller:flex-row justify-center items-center flex-wrap gap-3">
              <button
                class="min-w-full smaller:min-w-0 flex-1 bg-orange-500 hover:bg-orange-600 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2"
                (click)="viewTrainingDetails(training)"
              >
                {{ 'PREFERENCES_FAVORITES.FAVORITE_TRAININGS.VIEW_DETAILS' | translate }}
              </button>
              <button
                class="min-w-full smaller:min-w-0 flex-shrink-0 border-2 border-red-500 text-red-500 hover:bg-red-50 p-3 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"
                (click)="removeFavoriteTraining(training.id!)"
                [disabled]="isRemoving"
              >
                <svg class="w-5 h-5 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Favorite Personalized Jobs Section -->
      <div>
        <div class="flex items-start sm:items-center mb-8">
          <svg class="mt-1 sm:mt-0 shrink-0 mr-2 sm:mr-3 text-orange-500 w-5 h-5 xxs:w-6 xxs:h-6 sm:w-7 sm:h-7" viewBox="0 0 28 26" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M13.0256 2.88137C13.3342 2.18886 13.4886 1.84261 13.7036 1.73598C13.8902 1.64334 14.1094 1.64334 14.2961 1.73598C14.511 1.84261 14.6654 2.18886 14.9741 2.88137L17.4328 8.39728C17.5241 8.602 17.5697 8.70436 17.6404 8.78274C17.7028 8.8521 17.7792 8.90758 17.8644 8.94556C17.9608 8.98849 18.0722 9.00025 18.2952 9.02377L24.3009 9.65765C25.0549 9.73722 25.4318 9.77701 25.5997 9.94846C25.7454 10.0974 25.8132 10.3059 25.7828 10.5121C25.7478 10.7494 25.4662 11.0032 24.903 11.5108L20.4168 15.5537C20.2504 15.7037 20.167 15.7788 20.1144 15.8701C20.0677 15.951 20.0385 16.0408 20.0288 16.1336C20.0177 16.2385 20.0409 16.3481 20.0874 16.5674L21.3405 22.475C21.4978 23.2168 21.5765 23.5876 21.4653 23.8001C21.3686 23.9849 21.1913 24.1137 20.9858 24.1485C20.7493 24.1885 20.4209 23.9992 19.7641 23.6204L14.5328 20.603C14.3386 20.491 14.2416 20.4352 14.1384 20.4132C14.047 20.3938 13.9526 20.3938 13.8613 20.4132C13.7581 20.4352 13.661 20.491 13.4669 20.603L8.23558 23.6204C7.5788 23.9992 7.25042 24.1885 7.01387 24.1485C6.80839 24.1137 6.631 23.9849 6.53442 23.8001C6.42323 23.5876 6.50188 23.2168 6.6592 22.475L7.91222 16.5674C7.95872 16.3481 7.98198 16.2385 7.97094 16.1336C7.96116 16.0408 7.932 15.951 7.88534 15.8701C7.8326 15.7788 7.74935 15.7037 7.58286 15.5537L3.0967 11.5108C2.53348 11.0032 2.25187 10.7494 2.21686 10.5121C2.18646 10.3059 2.2542 10.0974 2.39999 9.94846C2.56783 9.77701 2.94483 9.73722 3.69883 9.65765L9.70455 9.02377C9.92746 9.00025 10.0389 8.98849 10.1353 8.94556C10.2205 8.90758 10.2969 8.8521 10.3594 8.78274C10.43 8.70436 10.4756 8.602 10.5669 8.39728L13.0256 2.88137Z" stroke="currentColor" stroke-width="2.56" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <h2 class="text-xl xxs:text-2xl font-bold text-gray-900">
            Favorite Personalized Jobs ({{ favoritePersonalizedJobs.length }})
          </h2>
        </div>

        <!-- Empty State for Personalized Jobs -->
        <div *ngIf="favoritePersonalizedJobs.length === 0" class="text-center py-12">
          <svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2m-8 0V6a2 2 0 00-2 2v6"></path>
          </svg>
          <h3 class="text-lg font-medium text-gray-900 mb-2">No favorite personalized jobs yet</h3>
          <p class="text-gray-500">Start favoriting personalized jobs to see them here.</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6" *ngIf="favoritePersonalizedJobs.length > 0">
          <div *ngFor="let job of favoritePersonalizedJobs" class="bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow duration-300 p-3 xxs:p-6">
            <div class="flex flex-col flex-wrap smaller-sm-md:flex-row smaller-sm-md:justify-between items-start mb-4 smaller-sm-md:gap-4">
              <div class="flex-1">
                <h3 class="text-xl font-semibold text-gray-900 mb-2">{{ job.title }}</h3>
                <p class="text-lg text-gray-500 font-medium mb-1">{{ job.companyName || 'Company not specified' }}</p>
                <p class="text-gray-500 mb-3">{{ job.location || 'Location not specified' }}</p>
              </div>
              <div class="flex-shrink-0">
                <span class="text-center inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-orange-100 text-orange-800">
                  {{ job.matchPercentage || 0 }}% {{ 'PREFERENCES_FAVORITES.FAVORITE_JOBS.MATCH' | translate }}
                </span>
              </div>
            </div>

            <div class="mb-6">
              <p class="text-gray-500 mb-2">{{ 'PREFERENCES_FAVORITES.FAVORITE_JOBS.SALARY' | translate }}: {{ job.salaryRange || 'Not specified' }}</p>
              <p class="text-gray-500 mb-2">{{ 'PREFERENCES_FAVORITES.FAVORITE_JOBS.ADDED_ON' | translate }}: {{ formatDate(job.createdAt) }}</p>
            </div>

            <div class="flex flex-col smaller:flex-row justify-center items-center flex-wrap gap-3">
              <button
                class="min-w-full smaller:min-w-0 flex-1 bg-orange-500 hover:bg-orange-600 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2"
                (click)="viewPersonalizedJobDetails(job)"
              >
                {{ 'PREFERENCES_FAVORITES.FAVORITE_JOBS.VIEW_DETAILS' | translate }}
              </button>
              <button
                class="min-w-full smaller:min-w-0 flex-shrink-0 border-2 border-red-500 text-red-500 hover:bg-red-50 p-3 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"
                (click)="removeFavoritePersonalizedJob(job.id!)"
                [disabled]="isRemoving"
              >
                <svg class="w-5 h-5 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Recommendation Job Details Modal -->
<div *ngIf="selectedRecommendationJob" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50" (click)="closeModal()">
  <div class="bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto" (click)="$event.stopPropagation()">
    <div class="p-6 border-b border-gray-200">
      <div class="flex justify-between items-start">
        <div class="flex-1">
          <h2 class="text-2xl font-bold text-gray-900 mb-2">{{ selectedRecommendationJob.title }}</h2>
          <p class="text-lg text-gray-600 mb-1">{{ selectedRecommendationJob.category }}</p>
          <p class="text-gray-500">{{ selectedRecommendationJob.salaryRange || 'Salary not specified' }}</p>
        </div>
        <button (click)="closeModal()" class="ml-4 p-2 hover:bg-gray-100 rounded-full transition-colors duration-200">
          <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
    </div>

    <div class="p-6">
      <div class="mb-6">
        <div class="flex items-center justify-between mb-4">
          <h3 class="font-semibold text-gray-900">Job Information</h3>
        </div>

        <div class="space-y-2 text-sm">
          <p><span class="font-medium">Category:</span> {{ selectedRecommendationJob.category || 'Not specified' }}</p>
          <p><span class="font-medium">Salary Range:</span> {{ selectedRecommendationJob.salaryRange || 'Not specified' }}</p>
          <p><span class="font-medium">Education:</span> {{ selectedRecommendationJob.education || 'Not specified' }}</p>
          <p><span class="font-medium">Job Market:</span> {{ selectedRecommendationJob.jobMarket || 'Not specified' }}</p>
        </div>
      </div>

      <div *ngIf="selectedRecommendationJob.description" class="mb-6">
        <h3 class="font-semibold text-gray-900 mb-2">Job Description</h3>
        <p class="text-gray-700 text-sm leading-relaxed">{{ selectedRecommendationJob.description }}</p>
      </div>

      <div *ngIf="selectedRecommendationJob.tags && selectedRecommendationJob.tags.length > 0" class="mb-6">
        <h3 class="font-semibold text-gray-900 mb-2">Tags</h3>
        <div class="flex flex-wrap gap-2">
          <span *ngFor="let tag of selectedRecommendationJob.tags"
                class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
            {{ tag }}
          </span>
        </div>
      </div>

      <div class="flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200">
        <button
          (click)="removeFavoriteRecommendationJob(selectedRecommendationJob.id!)"
          [disabled]="isRemoving"
          class="flex-1 border-2 border-red-500 text-red-500 hover:bg-red-50 font-medium py-3 px-6 rounded-lg transition-colors duration-200"
        >
          {{ isRemoving ? 'Removing...' : 'Remove from Favorites' }}
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Training Details Modal -->
<div *ngIf="selectedTraining" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50" (click)="closeModal()">
  <div class="bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto" (click)="$event.stopPropagation()">
    <div class="p-6 border-b border-gray-200">
      <div class="flex justify-between items-start">
        <div class="flex-1">
          <h2 class="text-2xl font-bold text-gray-900 mb-2">{{ selectedTraining.name }}</h2>
          <p class="text-lg text-gray-600 mb-1">{{ selectedTraining.type }}</p>
          <p class="text-gray-500">{{ selectedTraining.duration }}</p>
        </div>
        <button (click)="closeModal()" class="ml-4 p-2 hover:bg-gray-100 rounded-full transition-colors duration-200">
          <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
    </div>

    <div class="p-6">
      <div class="mb-6">
        <div class="flex items-center justify-between mb-4">
          <h3 class="font-semibold text-gray-900">Training Information</h3>
        </div>

        <div class="space-y-3 text-sm">
          <p><span class="font-medium">Duration:</span> {{ selectedTraining.duration || 'Not specified' }}</p>
          <p><span class="font-medium">Type:</span> {{ selectedTraining.type }}</p>
        </div>
      </div>

      <div *ngIf="selectedTraining.description" class="mb-6">
        <h3 class="font-semibold text-gray-900 mb-2">Description</h3>
        <p class="text-gray-700 text-sm leading-relaxed">{{ selectedTraining.description }}</p>
      </div>

      <div *ngIf="selectedTraining.specializations && selectedTraining.specializations.length > 0" class="mb-6">
        <h3 class="font-semibold text-gray-900 mb-2">Specializations</h3>
        <div class="flex flex-wrap gap-2">
          <span *ngFor="let specialization of selectedTraining.specializations"
                class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
            {{ specialization }}
          </span>
        </div>
      </div>

      <div class="flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200">
        <button
          (click)="removeFavoriteTraining(selectedTraining.id!)"
          [disabled]="isRemoving"
          class="flex-1 border-2 border-red-500 text-red-500 hover:bg-red-50 font-medium py-3 px-6 rounded-lg transition-colors duration-200"
        >
          {{ isRemoving ? 'Removing...' : 'Remove from Favorites' }}
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Personalized Job Details Modal -->
<div *ngIf="selectedPersonalizedJob" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50" (click)="closeModal()">
  <div class="bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto" (click)="$event.stopPropagation()">
    <div class="p-6 border-b border-gray-200">
      <div class="flex justify-between items-start">
        <div class="flex-1">
          <h2 class="text-2xl font-bold text-gray-900 mb-2">{{ selectedPersonalizedJob.title }}</h2>
          <p class="text-lg text-gray-600 mb-1">{{ selectedPersonalizedJob.companyName }}</p>
          <p class="text-gray-500">{{ selectedPersonalizedJob.location }}</p>
        </div>
        <button (click)="closeModal()" class="ml-4 p-2 hover:bg-gray-100 rounded-full transition-colors duration-200">
          <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
    </div>

    <div class="p-6">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
        <div>
          <h3 class="font-semibold text-gray-900 mb-2">Job Information</h3>
          <div class="space-y-2 text-sm">
            <p><span class="font-medium">Salary:</span> {{ selectedPersonalizedJob.salaryRange || 'Not specified' }}</p>
            <p><span class="font-medium">Job Type:</span> {{ selectedPersonalizedJob.jobType || 'Not specified' }}</p>
            <p><span class="font-medium">Experience:</span> {{ selectedPersonalizedJob.experienceRange || 'Not specified' }}</p>
            <p><span class="font-medium">Remote:</span> {{ selectedPersonalizedJob.isRemote ? 'Yes' : 'No' }}</p>
            <p><span class="font-medium">Posted:</span> {{ formatDate(selectedPersonalizedJob.postedDate) }}</p>
          </div>
        </div>

        <div *ngIf="selectedPersonalizedJob.companyName">
          <h3 class="font-semibold text-gray-900 mb-2">Company Information</h3>
          <div class="space-y-2 text-sm">
            <p><span class="font-medium">Industry:</span> {{ selectedPersonalizedJob.companyIndustry || 'Not specified' }}</p>
            <p><span class="font-medium">Employees:</span> {{ selectedPersonalizedJob.companyNumEmployees || 'Not specified' }}</p>
            <p><span class="font-medium">Revenue:</span> {{ selectedPersonalizedJob.companyRevenue || 'Not specified' }}</p>
            <p *ngIf="selectedPersonalizedJob.companyUrl">
              <span class="font-medium">Website:</span>
              <a [href]="selectedPersonalizedJob.companyUrl" target="_blank" class="text-orange-600 hover:text-orange-700 ml-1">Visit</a>
            </p>
          </div>
        </div>
      </div>

      <div *ngIf="selectedPersonalizedJob.description" class="mb-6">
        <h3 class="font-semibold text-gray-900 mb-2">Job Description</h3>
        <p class="text-gray-700 text-sm leading-relaxed">{{ selectedPersonalizedJob.description }}</p>
      </div>

      <div *ngIf="selectedPersonalizedJob.requiredSkills" class="mb-6">
        <h3 class="font-semibold text-gray-900 mb-2">Required Skills</h3>
        <p class="text-gray-700 text-sm">{{ selectedPersonalizedJob.requiredSkills }}</p>
      </div>

      <div *ngIf="selectedPersonalizedJob.advantages && selectedPersonalizedJob.advantages.length > 0" class="mb-6">
        <h3 class="font-semibold text-gray-900 mb-2">Advantages</h3>
        <ul class="list-disc list-inside text-gray-700 text-sm space-y-1">
          <li *ngFor="let advantage of selectedPersonalizedJob.advantages">{{ advantage }}</li>
        </ul>
      </div>

      <div class="flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200">
        <button
          *ngIf="selectedPersonalizedJob.applyUrl"
          (click)="applyToJob(selectedPersonalizedJob.applyUrl!)"
          class="flex-1 bg-orange-500 hover:bg-orange-600 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200"
        >
          Apply Now
        </button>
        <button
          (click)="removeFavoritePersonalizedJob(selectedPersonalizedJob.id!)"
          [disabled]="isRemoving"
          class="flex-1 border-2 border-red-500 text-red-500 hover:bg-red-50 font-medium py-3 px-6 rounded-lg transition-colors duration-200"
        >
          {{ isRemoving ? 'Removing...' : 'Remove from Favorites' }}
        </button>
      </div>
    </div>
  </div>
</div>
