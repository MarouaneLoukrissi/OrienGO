<div class="min-h-screen bg-orange-50">
    <!-- Loading State -->
    <div *ngIf="loading" class="flex items-center justify-center min-h-screen px-4">
        <div class="text-center">
            <div class="animate-spin rounded-full h-8 w-8 sm:h-12 sm:w-12 border-b-2 border-orange-500 mx-auto mb-4"></div>
            <p class="text-gray-600 text-sm sm:text-base">Loading your personalized recommendations...</p>
        </div>
    </div>

    <!-- Error State -->
    <div *ngIf="error" class="flex items-center justify-center min-h-screen px-4">
        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded max-w-md w-full">
            <p class="text-sm sm:text-base mb-3">{{ error }}</p>
            <button (click)="loadRecommendations()"
                    class="w-full sm:w-auto bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition-colors text-sm sm:text-base">
                Try Again
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div *ngIf="!loading && !error" class="mx-auto w-full md-lg:max-w-[88rem] px-4 py-6 sm:px-6 sm:py-8 lg:px-8">
        <!-- Header Section -->
        <div class="text-center mb-8 sm:mb-12">
            <!-- Lightbulb Icon -->
            <div class="w-20 h-20 sm:w-[86px] sm:h-[86px] md:w-24 md:h-24 inline-flex items-center justify-center bg-orange-500 rounded-full mb-4">
                <svg class="w-10 h-10 sm:w-[40px] sm:h-[40px] md:w-16 md:h-16 text-white" viewBox="0 0 45 58" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M26.8772 52.3738C27.5236 52.3738 28.1437 52.6306 28.6008 53.0877C29.0578 53.5448 29.3147 54.165 29.3147 54.8113C29.3146 55.4577 29.0578 56.0779 28.6008 56.535C28.1437 56.992 27.5235 57.2488 26.8772 57.2488H17.8352C17.1888 57.2488 16.5686 56.992 16.1115 56.535C15.6545 56.0779 15.3977 55.4577 15.3977 54.8113C15.3977 54.165 15.6546 53.5448 16.1115 53.0877C16.5686 52.6307 17.1888 52.3739 17.8352 52.3738H26.8772ZM30.7522 44.6238C31.3986 44.6238 32.0187 44.8806 32.4758 45.3377C32.9328 45.7948 33.1897 46.415 33.1897 47.0613C33.1896 47.7077 32.9328 48.3279 32.4758 48.785C32.0187 49.242 31.3985 49.4988 30.7522 49.4988H13.9602C13.3138 49.4988 12.6936 49.242 12.2365 48.785C11.7795 48.3279 11.5227 47.7077 11.5227 47.0613C11.5227 46.415 11.7796 45.7948 12.2365 45.3377C12.6936 44.8807 13.3138 44.6239 13.9602 44.6238H30.7522ZM22.3566 0.706848C34.4588 0.707007 43.5227 9.59808 43.5227 20.8895C43.5226 26.304 41.1957 29.9398 38.8791 32.827V32.8279C38.3966 33.4278 37.9015 34.0115 37.4377 34.5604L37.4367 34.5594L37.2004 34.8416H37.1994C36.6569 35.4823 36.1605 36.0756 35.7121 36.6658V36.6668C34.8091 37.8514 34.1796 38.9092 33.8479 40.0125C33.6617 40.6318 33.2367 41.1526 32.6672 41.4588C32.0978 41.7648 31.4298 41.8324 30.8107 41.6463C30.1915 41.4601 29.6717 41.0351 29.3654 40.4656C29.0593 39.8962 28.9918 39.2284 29.1779 38.6092V38.6082C29.7529 36.7027 30.7723 35.1053 31.8352 33.7117C32.3656 33.0132 32.9338 32.3377 33.4777 31.6932L33.4787 31.6922L33.7238 31.4031L34.4104 30.5877C34.6355 30.318 34.8575 30.0487 35.0773 29.7752C37.0955 27.2555 38.6476 24.6916 38.6477 20.8895C38.6477 12.4613 31.9401 5.582 22.3566 5.58185C12.773 5.58185 6.06465 12.4612 6.06465 20.8895C6.0647 24.4543 7.42945 26.933 9.26289 29.3006L9.63594 29.7733C10.0753 30.3225 10.5237 30.852 10.9895 31.4031H10.9885L11.2346 31.6902L11.2385 31.6942C11.7794 32.3382 12.3474 33.0138 12.8801 33.7117L12.8811 33.7127C13.8748 35.0189 14.8328 36.5045 15.4201 38.2557L15.5324 38.6092L15.5354 38.6199L15.0529 38.7527L15.5354 38.6209C15.7039 39.2343 15.6263 39.8894 15.3186 40.4461C15.0106 41.003 14.4963 41.418 13.8869 41.6014C13.2777 41.7845 12.6208 41.722 12.0568 41.4276C11.4927 41.133 11.0662 40.6291 10.8684 40.0242L10.8645 40.0125C10.5327 38.9069 9.90354 37.8518 9.0002 36.6668V36.6658C8.52054 36.0464 8.02492 35.4392 7.51485 34.8445L7.51094 34.8397L7.27559 34.5574C6.8113 34.0106 6.31605 33.4269 5.83321 32.824C3.51658 29.9393 1.18965 26.3033 1.18965 20.8865C1.18973 9.60029 10.2544 0.706848 22.3566 0.706848Z" fill="currentColor" stroke="currentColor" stroke-width="0.1"/>
                </svg>
            </div>

            <h1 class="text-sm xxs:text-base xs:text-xl smaller:text-2xl sm:text-4xl font-bold text-gray-800 mb-4">
                Personalized Career Recommendations
            </h1>
            <p class="text-gray-600 text-base sm:text-lg mb-8 max-w-xl sm:max-w-2xl mx-auto sm:px-0">
                Discover careers that align with your personality and interests. <br class="hidden lg:block">
                <span class="font-medium">{{ userProfile?.riasecProfile || 'Based on your assessment results' }}</span>
                <span *ngIf="!isOwner" class="block text-sm text-blue-600 mt-2 font-medium">
                    üëÅÔ∏è Coach View - Viewing as read-only
                </span>
            </p>
        </div>

        <!-- No Results Message -->
        <div *ngIf="careers.length === 0 && educationPaths.length === 0 && !loading && !error"
             class="text-center py-12">
            <div class="text-gray-500 mb-4">
                <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.47.881-6.071 2.33M12 15V3m0 12l3-3m-6 0l3 3"></path>
                </svg>
            </div>
            <h3 class="text-lg font-medium text-gray-900 mb-2">No recommendations available</h3>
            <p class="text-gray-600 mb-4">We couldn't find any recommendations for your test results.</p>
            <button (click)="loadRecommendations()"
                    class="bg-orange-500 text-white px-6 py-3 rounded-lg hover:bg-orange-600 transition-colors">
                Try Again
            </button>
        </div>

        <!-- Recommended Careers Section -->
        <div *ngIf="careers.length > 0" class="mb-8 sm:mb-12">
            <h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-6 sm:mb-8 flex items-start sm:items-center sm:px-0">
                <svg class="mr-2 sm:mr-3 text-orange-500 w-6 h-6 sm:w-7 sm:h-7" viewBox="0 0 28 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M13.0256 2.88137C13.3342 2.18886 13.4886 1.84261 13.7036 1.73598C13.8902 1.64334 14.1094 1.64334 14.2961 1.73598C14.511 1.84261 14.6654 2.18886 14.9741 2.88137L17.4328 8.39728C17.5241 8.602 17.5697 8.70436 17.6404 8.78274C17.7028 8.8521 17.7792 8.90758 17.8644 8.94556C17.9608 8.98849 18.0722 9.00025 18.2952 9.02377L24.3009 9.65765C25.0549 9.73722 25.4318 9.77701 25.5997 9.94846C25.7454 10.0974 25.8132 10.3059 25.7828 10.5121C25.7478 10.7494 25.4662 11.0032 24.903 11.5108L20.4168 15.5537C20.2504 15.7037 20.167 15.7788 20.1144 15.8701C20.0677 15.951 20.0385 16.0408 20.0288 16.1336C20.0177 16.2385 20.0409 16.3481 20.0874 16.5674L21.3405 22.475C21.4978 23.2168 21.5765 23.5876 21.4653 23.8001C21.3686 23.9849 21.1913 24.1137 20.9858 24.1485C20.7493 24.1885 20.4209 23.9992 19.7641 23.6204L14.5328 20.603C14.3386 20.491 14.2416 20.4352 14.1384 20.4132C14.047 20.3938 13.9526 20.3938 13.8613 20.4132C13.7581 20.4352 13.661 20.491 13.4669 20.603L8.23558 23.6204C7.5788 23.9992 7.25042 24.1885 7.01387 24.1485C6.80839 24.1137 6.631 23.9849 6.53442 23.8001C6.42323 23.5876 6.50188 23.2168 6.6592 22.475L7.91222 16.5674C7.95872 16.3481 7.98198 16.2385 7.97094 16.1336C7.96116 16.0408 7.932 15.951 7.88534 15.8701C7.8326 15.7788 7.74935 15.7037 7.58286 15.5537L3.0967 11.5108C2.53348 11.0032 2.25187 10.7494 2.21686 10.5121C2.18646 10.3059 2.2542 10.0974 2.39999 9.94846C2.56783 9.77701 2.94483 9.73722 3.69883 9.65765L9.70455 9.02377C9.92746 9.00025 10.0389 8.98849 10.1353 8.94556C10.2205 8.90758 10.2969 8.8521 10.3594 8.78274C10.43 8.70436 10.4756 8.602 10.5669 8.39728L13.0256 2.88137Z" stroke="currentColor" stroke-width="2.56" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span class="text-sm xs:text-base sm:text-xl lg:text-2xl">Recommended Careers</span>
            </h2>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-8 sm:mb-12">
                <div *ngFor="let career of careers; trackBy: trackByCareer"
                        class="bg-white rounded-xl shadow-sm border border-gray-100 p-4 sm:p-6 hover:shadow-md transition-all duration-200 cursor-pointer "
                        (click)="onCareerClick(career)">
                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-start mb-4 gap-3 sm:gap-0">
                        <h3 class="text-lg sm:text-xl font-semibold text-gray-900 leading-tight break-words">{{ career.title }}</h3>
                        <div class="flex items-center gap-2">
                            <span class="bg-orange-500 text-white text-xs sm:text-sm font-medium px-3 py-1 rounded-full whitespace-nowrap">
                                {{ career.matchPercentage }}% Match
                            </span>
                            <!-- Action buttons for owner -->
                            <div *ngIf="canPerformActions()" class="flex items-center gap-2 ml-2">
                                <!-- Favorite Button -->
                                <button
                                    class="p-2 rounded-full hover:bg-gray-100 transition-colors"
                                    [class.text-red-500]="career.isFavorite"
                                    [class.text-gray-400]="!career.isFavorite"
                                    (click)="toggleJobFavorite(career); $event.stopPropagation()"
                                    [title]="career.isFavorite ? 'Remove from favorites' : 'Add to favorites'">
                                    <svg [attr.stroke]="career.isFavorite ? 'none' : '#9BA3AF'" class="w-5 h-5" viewBox="0 0 18 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M9 2.50019C7.35055 0.577926 4.59429 -0.0161379 2.52763 1.74408C0.460956 3.5043 0.169997 6.44728 1.79296 8.52912C3.14235 10.26 7.22607 13.9106 8.56449 15.0922C8.71418 15.2244 8.78907 15.2905 8.87643 15.3164C8.95261 15.339 9.03602 15.339 9.11229 15.3164C9.19965 15.2905 9.27445 15.2244 9.42423 15.0922C10.7627 13.9106 14.8463 10.26 16.1957 8.52912C17.8187 6.44728 17.5632 3.48579 15.461 1.74408C13.3588 0.00237875 10.6494 0.577926 9 2.50019Z" stroke-width="1.28" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </button>
                                <!-- Save Button -->
                                <button
                                    class="p-2 rounded-full hover:bg-gray-100 transition-colors"
                                    [class.text-blue-500]="career.isSaved"
                                    [class.text-gray-400]="!career.isSaved"
                                    (click)="toggleJobSave(career); $event.stopPropagation()"
                                    [title]="career.isSaved ? 'Remove from saved' : 'Save for later'">
                                    <svg class="w-5 h-5" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"/>
                                    </svg>
                                </button>
                            </div>
                            <!-- Read-only status indicators for coaches -->
                            <div *ngIf="!canPerformActions()" class="flex items-center gap-2 ml-2">
                                <div
                                    class="p-2 rounded-full cursor-not-allowed"
                                    [class.text-red-500]="career.isFavorite"
                                    [class.text-gray-300]="!career.isFavorite"
                                    [title]="career.isFavorite ? 'Favorited by student' : 'Not favorited'">
                                    <svg [attr.stroke]="career.isFavorite ? 'none' : '#9BA3AF'" class="w-5 h-5" viewBox="0 0 18 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M9 2.50019C7.35055 0.577926 4.59429 -0.0161379 2.52763 1.74408C0.460956 3.5043 0.169997 6.44728 1.79296 8.52912C3.14235 10.26 7.22607 13.9106 8.56449 15.0922C8.71418 15.2244 8.78907 15.2905 8.87643 15.3164C8.95261 15.339 9.03602 15.339 9.11229 15.3164C9.19965 15.2905 9.27445 15.2244 9.42423 15.0922C10.7627 13.9106 14.8463 10.26 16.1957 8.52912C17.8187 6.44728 17.5632 3.48579 15.461 1.74408C13.3588 0.00237875 10.6494 0.577926 9 2.50019Z" stroke-width="1.28" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div
                                    class="p-2 rounded-full cursor-not-allowed"
                                    [class.text-blue-500]="career.isSaved"
                                    [class.text-gray-300]="!career.isSaved"
                                    [title]="career.isSaved ? 'Saved by student' : 'Not saved'">
                                    <svg class="w-5 h-5" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mb-4">
                        <span [class]="'inline-block text-xs sm:text-sm font-medium px-3 py-1 rounded-full ' + career.categoryColor">
                            {{ career.category }}
                        </span>
                    </div>

                    <p class="text-gray-600 mb-4 text-sm sm:text-base leading-relaxed">{{ career.description }}</p>

                    <div class="space-y-2 sm:space-y-3 mb-4">
                        <div class="flex items-start text-xs sm:text-sm text-gray-600">
                            <svg class="w-4 h-4 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                            </svg>
                            <span><span class="font-medium">Education:</span> {{ career.education }}</span>
                        </div>

                        <div class="flex items-start text-xs sm:text-sm text-gray-600">
                            <svg class="w-4 h-4 mr-2 mt-0.5 flex-shrink-0" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <path d="M12 3V21M15.679 6.63439C14.063 4.2691 7.94541 4.02196 7.94541 8.16745C7.94541 12.3129 16.7524 10.33 16.2439 15.2118C15.8199 19.2823 9.19299 19.3384 7.21094 16.0891" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                </g>
                            </svg>
                            <span><span class="font-medium">Salary:</span> {{ career.salary }}</span>
                        </div>

                        <div class="flex items-start text-xs sm:text-sm text-gray-600">
                            <svg class="w-4 h-4 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                            </svg>
                            <span><span class="font-medium">Job Market:</span> {{ career.jobMarket }}</span>
                        </div>
                    </div>

                    <div class="flex flex-wrap gap-1.5 sm:gap-2 mb-4 sm:mb-6">
                        <span *ngFor="let skill of career.skills"
                                class="truncate text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded">
                            {{ skill }}
                        </span>
                    </div>

                    <button class="w-full bg-orange-500 text-white font-medium py-2.5 sm:py-3 px-4 rounded-lg hover:bg-orange-600 transition-colors duration-200 flex items-center justify-center text-sm sm:text-base"
                            (click)="onSeeMoreClick(career, $event)">
                        See More
                        <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Education Paths Section -->
        <div *ngIf="educationPaths.length > 0" class="mb-8 sm:mb-12">
            <h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-6 sm:mb-8 flex items-center sm:px-0">
                <svg class="w-6 h-6 sm:w-8 sm:h-8 text-orange-500 mr-2 sm:mr-3" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"/>
                </svg>
                <span class="text-sm xs:text-base sm:text-xl lg:text-2xl">Recommended Education Paths</span>
            </h2>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6">
                <div *ngFor="let education of educationPaths; trackBy: trackByEducation"
                class="bg-white rounded-xl shadow-sm border border-gray-100 p-4 sm:p-6 hover:shadow-md transition-all duration-200 cursor-pointer "
                (click)="onEducationClick(education)"
                >
                    <div class="flex flex-wrap justify-between items-start gap-4 mb-4">
                        <!-- Left: Title and Duration -->
                        <div class="min-w-fit flex-1">
                            <h3 class="text-base sm:text-lg font-semibold text-gray-900 mb-2 leading-tight">
                                {{ education.title }}
                            </h3>
                            <span class="text-xs sm:text-sm text-orange-600 bg-orange-100 px-2 sm:px-3 py-1 rounded-full inline-block">
                                {{ education.duration }}
                            </span>
                        </div>

                        <!-- Right: Percentage and Action Buttons -->
                        <div class="flex flex-col items-end gap-2">
                            <div class="text-center">
                                <div class="text-xl sm:text-2xl font-bold text-orange-500">
                                    {{ education.matchPercentage }}%
                                </div>
                                <div class="text-xs text-gray-500">Match</div>
                            </div>
                            <!-- Action buttons for owner -->
                            <div *ngIf="canPerformActions()" class="flex items-center gap-2">
                                <!-- Favorite Button -->
                                <button
                                    class="p-2 rounded-full hover:bg-gray-100 transition-colors"
                                    [class.text-red-500]="education.isFavorite"
                                    [class.text-gray-400]="!education.isFavorite"
                                    (click)="toggleTrainingFavorite(education); $event.stopPropagation()"
                                    [title]="education.isFavorite ? 'Remove from favorites' : 'Add to favorites'">
                                    <svg [attr.stroke]="education.isFavorite ? 'none' : '#9BA3AF'" class="w-4 h-4" viewBox="0 0 18 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M9 2.50019C7.35055 0.577926 4.59429 -0.0161379 2.52763 1.74408C0.460956 3.5043 0.169997 6.44728 1.79296 8.52912C3.14235 10.26 7.22607 13.9106 8.56449 15.0922C8.71418 15.2244 8.78907 15.2905 8.87643 15.3164C8.95261 15.339 9.03602 15.339 9.11229 15.3164C9.19965 15.2905 9.27445 15.2244 9.42423 15.0922C10.7627 13.9106 14.8463 10.26 16.1957 8.52912C17.8187 6.44728 17.5632 3.48579 15.461 1.74408C13.3588 0.00237875 10.6494 0.577926 9 2.50019Z" stroke-width="1.28" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </button>
                                <!-- Save Button -->
                                <button
                                    class="p-2 rounded-full hover:bg-gray-100 transition-colors"
                                    [class.text-blue-500]="education.isSaved"
                                    [class.text-gray-400]="!education.isSaved"
                                    (click)="toggleTrainingSave(education); $event.stopPropagation()"
                                    [title]="education.isSaved ? 'Remove from saved' : 'Save for later'">
                                    <svg class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"/>
                                    </svg>
                                </button>
                            </div>
                            <!-- Read-only status indicators for coaches -->
                            <div *ngIf="!canPerformActions()" class="flex items-center gap-2">
                                <div
                                    class="p-2 rounded-full cursor-not-allowed"
                                    [class.text-red-500]="education.isFavorite"
                                    [class.text-gray-300]="!education.isFavorite"
                                    [title]="education.isFavorite ? 'Favorited by student' : 'Not favorited'">
                                    <svg [attr.stroke]="education.isFavorite ? 'none' : '#9BA3AF'" class="w-4 h-4" viewBox="0 0 18 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M9 2.50019C7.35055 0.577926 4.59429 -0.0161379 2.52763 1.74408C0.460956 3.5043 0.169997 6.44728 1.79296 8.52912C3.14235 10.26 7.22607 13.9106 8.56449 15.0922C8.71418 15.2244 8.78907 15.2905 8.87643 15.3164C8.95261 15.339 9.03602 15.339 9.11229 15.3164C9.19965 15.2905 9.27445 15.2244 9.42423 15.0922C10.7627 13.9106 14.8463 10.26 16.1957 8.52912C17.8187 6.44728 17.5632 3.48579 15.461 1.74408C13.3588 0.00237875 10.6494 0.577926 9 2.50019Z" stroke-width="1.28" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div
                                    class="p-2 rounded-full cursor-not-allowed"
                                    [class.text-blue-500]="education.isSaved"
                                    [class.text-gray-300]="!education.isSaved"
                                    [title]="education.isSaved ? 'Saved by student' : 'Not saved'">
                                    <svg class="w-4 h-4" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>

                    <p class="text-gray-600 text-xs sm:text-sm mb-4 leading-relaxed">{{ education.description }}</p>

                    <div class="mb-4" *ngIf="education.specializations && education.specializations.length > 0">
                        <h4 class="text-xs sm:text-sm font-medium text-gray-900 mb-2">Specializations</h4>
                        <ul class="space-y-1.5 sm:space-y-1">
                            <li *ngFor="let spec of education.specializations"
                                class="text-xs sm:text-sm text-gray-600 flex items-start">
                                <div class="w-1.5 h-1.5 sm:w-2 sm:h-2 bg-orange-400 rounded-full mr-2 mt-1.5 sm:mt-2 flex-shrink-0"></div>
                                <span class="leading-tight">{{ spec }}</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- CTA Section -->
        <div class="bg-gradient-to-r from-orange-400 to-orange-500 rounded-2xl p-6 sm:p-8 text-center text-white sm:mx-0">
            <h2 class="text-xl sm:text-2xl lg:text-3xl font-bold mb-3 sm:mb-4 leading-tight">
                Explore Detailed Job Profiles
            </h2>
            <p class="text-sm sm:text-base lg:text-lg mb-6 sm:mb-8 text-orange-50 max-w-lg sm:max-w-xl lg:max-w-2xl mx-auto leading-relaxed">
                Discover our complete database of career opportunities and find the perfect match for your interests.
            </p>
            <button [routerLink]="['/student/test/personalizedjobs']" [queryParams]="jobRecommendationQueryParams" (click)="onExploreJobProfiles()"
                    class="max-w-full bg-white text-orange-500 font-semibold py-2.5 sm:py-3 px-6 sm:px-8 rounded-lg hover:bg-orange-50 transition-colors duration-200 inline-flex items-center text-sm sm:text-lg">
                <span class="truncate block">
                    See All Job Profiles
                </span>
                <svg class="w-4 h-4 sm:w-5 sm:h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </button>
        </div>
    </div>

    <!-- Career Details Modal -->
    <div *ngIf="showModal && selectedCareer"
         class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50"
         (click)="onModalBackdropClick($event)">
        <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <!-- Modal Header -->
            <div class="sticky top-0 bg-white rounded-t-2xl border-b border-gray-200 p-6 flex justify-between items-start">
                <div class="flex-1 pr-4">
                    <h3 class="text-2xl font-bold text-gray-900 mb-2">{{ selectedCareer.title }}</h3>
                    <div class="flex items-center gap-3">
                        <span [class]="'inline-block text-sm font-medium px-3 py-1 rounded-full ' + selectedCareer.categoryColor">
                            {{ selectedCareer.category }}
                        </span>
                        <span class="bg-orange-500 text-white text-sm font-medium px-3 py-1 rounded-full">
                            {{ selectedCareer.matchPercentage }}% Match
                        </span>
                        <!-- Show saved/favorite status indicators -->
                        <span
                            *ngIf="selectedCareer.isSaved"
                            class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium flex items-center gap-1">
                            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"/>
                            </svg>
                            Saved
                        </span>
                        <span
                            *ngIf="selectedCareer.isFavorite"
                            class="px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium flex items-center gap-1">
                            <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/>
                            </svg>
                            Favorite
                        </span>
                    </div>
                </div>
                <button (click)="closeModal()"
                        class="text-gray-400 hover:text-gray-600 transition-colors p-1">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- Modal Content -->
            <div class="p-6">
                <!-- Description -->
                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-900 mb-3">About This Career</h4>
                    <p class="text-gray-600 leading-relaxed">{{ selectedCareer.description }}</p>
                </div>

                <!-- Career Details Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <!-- Education Requirements -->
                    <div class="bg-gray-50 rounded-xl p-4">
                        <div class="flex items-center mb-3">
                            <svg class="w-5 h-5 mr-3 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                            </svg>
                            <h5 class="font-semibold text-gray-900">Education Requirements</h5>
                        </div>
                        <p class="text-gray-600">{{ selectedCareer.education }}</p>
                    </div>

                    <!-- Salary Range -->
                    <div class="bg-gray-50 rounded-xl p-4">
                        <div class="flex items-center mb-3">
                            <svg class="w-5 h-5 mr-3 text-orange-500" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <path d="M12 3V21M15.679 6.63439C14.063 4.2691 7.94541 4.02196 7.94541 8.16745C7.94541 12.3129 16.7524 10.33 16.2439 15.2118C15.8199 19.2823 9.19299 19.3384 7.21094 16.0891" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                                </g>
                            </svg>
                            <h5 class="font-semibold text-gray-900">Salary Range</h5>
                        </div>
                        <p class="text-gray-600">{{ selectedCareer.salary }}</p>
                    </div>

                    <!-- Job Market -->
                    <div class="bg-gray-50 rounded-xl p-4">
                        <div class="flex items-center mb-3">
                            <svg class="w-5 h-5 mr-3 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                            </svg>
                            <h5 class="font-semibold text-gray-900">Job Market Outlook</h5>
                        </div>
                        <p class="text-gray-600">{{ selectedCareer.jobMarket }}</p>
                    </div>

                    <!-- Match Percentage -->
                    <div class="bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4">
                        <div class="flex items-center mb-3">
                            <svg class="w-5 h-5 mr-3 text-orange-500" viewBox="0 0 28 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M13.0256 2.88137C13.3342 2.18886 13.4886 1.84261 13.7036 1.73598C13.8902 1.64334 14.1094 1.64334 14.2961 1.73598C14.511 1.84261 14.6654 2.18886 14.9741 2.88137L17.4328 8.39728C17.5241 8.602 17.5697 8.70436 17.6404 8.78274C17.7028 8.8521 17.7792 8.90758 17.8644 8.94556C17.9608 8.98849 18.0722 9.00025 18.2952 9.02377L24.3009 9.65765C25.0549 9.73722 25.4318 9.77701 25.5997 9.94846C25.7454 10.0974 25.8132 10.3059 25.7828 10.5121C25.7478 10.7494 25.4662 11.0032 24.903 11.5108L20.4168 15.5537C20.2504 15.7037 20.167 15.7788 20.1144 15.8701C20.0677 15.951 20.0385 16.0408 20.0288 16.1336C20.0177 16.2385 20.0409 16.3481 20.0874 16.5674L21.3405 22.475C21.4978 23.2168 21.5765 23.5876 21.4653 23.8001C21.3686 23.9849 21.1913 24.1137 20.9858 24.1485C20.7493 24.1885 20.4209 23.9992 19.7641 23.6204L14.5328 20.603C14.3386 20.491 14.2416 20.4352 14.1384 20.4132C14.047 20.3938 13.9526 20.3938 13.8613 20.4132C13.7581 20.4352 13.661 20.491 13.4669 20.603L8.23558 23.6204C7.5788 23.9992 7.25042 24.1885 7.01387 24.1485C6.80839 24.1137 6.631 23.9849 6.53442 23.8001C6.42323 23.5876 6.50188 23.2168 6.6592 22.475L7.91222 16.5674C7.95872 16.3481 7.98198 16.2385 7.97094 16.1336C7.96116 16.0408 7.932 15.951 7.88534 15.8701C7.8326 15.7788 7.74935 15.7037 7.58286 15.5537L3.0967 11.5108C2.53348 11.0032 2.25187 10.7494 2.21686 10.5121C2.18646 10.3059 2.2542 10.0974 2.39999 9.94846C2.56783 9.77701 2.94483 9.73722 3.69883 9.65765L9.70455 9.02377C9.92746 9.00025 10.0389 8.98849 10.1353 8.94556C10.2205 8.90758 10.2969 8.8521 10.3594 8.78274C10.43 8.70436 10.4756 8.602 10.5669 8.39728L13.0256 2.88137Z" stroke="currentColor" stroke-width="2.56" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <h5 class="font-semibold text-gray-900">Compatibility Score</h5>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold text-orange-600 mb-1">{{ selectedCareer.matchPercentage }}%</div>
                            <p class="text-sm text-gray-600">Based on your assessment results</p>
                        </div>
                    </div>
                </div>

                <!-- Required Skills -->
                <div class="mb-6" *ngIf="selectedCareer.skills && selectedCareer.skills.length > 0">
                    <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                        <svg class="w-5 h-5 mr-3 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                        </svg>
                        Required Skills & Competencies
                    </h4>
                    <div class="flex flex-wrap gap-2">
                        <span *ngFor="let skill of selectedCareer.skills"
                              class="bg-orange-100 text-orange-800 text-sm font-medium px-3 py-2 rounded-lg">
                            {{ skill }}
                        </span>
                    </div>
                </div>

                <!-- Modal Actions -->
                <div class="flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200">
                    <button (click)="closeModal()"
                            class="flex-1 bg-gray-100 text-gray-700 font-medium py-3 px-6 rounded-lg hover:bg-gray-200 transition-colors duration-200">
                        Close
                    </button>
                    <button class="flex-1 bg-orange-500 text-white font-medium py-3 px-6 rounded-lg hover:bg-orange-600 transition-colors duration-200 flex items-center justify-center">
                        Explore Career Path
                        <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
