<div class="min-h-screen bg-orange-50">
      <!-- Header -->
      <div class="">
        <div class="max-w-[88rem] mx-auto px-2 smaller:px-4 py-6 sm:px-6 sm:py-8 lg:px-8">
          <div class="text-center mb-8 sm:mb-12">
            <div class="w-20 h-20 sm:w-[86px] sm:h-[86px] md:w-24 md:h-24 inline-flex items-center justify-center bg-orange-500 rounded-full mb-4">
              <svg class="w-12 h-12 sm:w-14 sm:h-14 md:w-[64px] md:h-[64px] text-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M9.00195 17H5.60636C4.34793 17 3.71872 17 3.58633 16.9023C3.4376 16.7925 3.40126 16.7277 3.38515 16.5436C3.37082 16.3797 3.75646 15.7486 4.52776 14.4866C5.32411 13.1835 6.00031 11.2862 6.00031 8.6C6.00031 7.11479 6.63245 5.69041 7.75766 4.6402C8.88288 3.59 10.409 3 12.0003 3C13.5916 3 15.1177 3.59 16.2429 4.6402C17.3682 5.69041 18.0003 7.11479 18.0003 8.6C18.0003 11.2862 18.6765 13.1835 19.4729 14.4866C20.2441 15.7486 20.6298 16.3797 20.6155 16.5436C20.5994 16.7277 20.563 16.7925 20.4143 16.9023C20.2819 17 19.6527 17 18.3943 17H15.0003M9.00195 17L9.00031 18C9.00031 19.6569 10.3435 21 12.0003 21C13.6572 21 15.0003 19.6569 15.0003 18V17M9.00195 17H15.0003" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
            </div>
            <h1 class="text-sm xxs:text-base xs:text-xl smaller:text-2xl sm:text-4xl font-bold text-gray-800 mb-4">
              {{ 'NOTIFICATIONS.TITLE' | translate }}
            </h1>
            <p class="text-gray-600 text-base sm:text-lg mb-8 max-w-xl sm:max-w-2xl mx-auto sm:px-0">
              {{ 'NOTIFICATIONS.SUBTITLE' | translate }}
            </p>
          </div>
          <div class="flex flex-col gap-6 max-w-full">
            <div class="max-w-full bg-white flex flex-wrap gap-4 justify-between px-4 py-3 rounded-xl">
              <div class="flex flex-wrap items-center gap-3">
                <div class="shrink-0 rounded-full flex items-center justify-center">
                  <svg class="w-6 h-6 sm:w-[28px] sm:h-[28px] text-orange-500" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M9.00195 17H5.60636C4.34793 17 3.71872 17 3.58633 16.9023C3.4376 16.7925 3.40126 16.7277 3.38515 16.5436C3.37082 16.3797 3.75646 15.7486 4.52776 14.4866C5.32411 13.1835 6.00031 11.2862 6.00031 8.6C6.00031 7.11479 6.63245 5.69041 7.75766 4.6402C8.88288 3.59 10.409 3 12.0003 3C13.5916 3 15.1177 3.59 16.2429 4.6402C17.3682 5.69041 18.0003 7.11479 18.0003 8.6C18.0003 11.2862 18.6765 13.1835 19.4729 14.4866C20.2441 15.7486 20.6298 16.3797 20.6155 16.5436C20.5994 16.7277 20.563 16.7925 20.4143 16.9023C20.2819 17 19.6527 17 18.3943 17H15.0003M9.00195 17L9.00031 18C9.00031 19.6569 10.3435 21 12.0003 21C13.6572 21 15.0003 19.6569 15.0003 18V17M9.00195 17H15.0003" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
                </div>
                <h1 class="text-lg sm:text-xl font-bold text-slate-800">{{ 'NOTIFICATIONS.TITLE' | translate }}</h1>
                <span *ngIf="unreadCount > 0"
                  class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-700">
                  {{ unreadCount }} {{ 'NOTIFICATIONS.NEW' | translate }}
                </span>
              </div>
            </div>
            <!-- Main Content -->
            <div class="bg-white max-w-full rounded-2xl px-2 smaller:px-4 sm:px-6 lg:px-8 py-6">
              <!-- Filter Tabs -->
              <div class="mb-6">
                <div class="border-b border-orange-200">
                  <nav class="flex space-x-8 overflow-x-auto scrollbar-hidden scroll-smooth">
                    <button
                      *ngFor="let filter of availableFilters"
                      (click)="setActiveFilter(filter.key)"
                      [class]="activeFilter === filter.key ?
                        'border-orange-500 text-orange-600 font-semibold' :
                        'border-transparent text-slate-500 hover:text-slate-700 hover:border-orange-300'"
                      class="whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm transition-colors">
                      {{ filter.label | translate }}
                      <span *ngIf="filter.count > 0"
                        class="ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium"
                        [class]="activeFilter === filter.key ? 'bg-orange-100 text-orange-700' : 'bg-slate-100 text-slate-600'">
                        {{ filter.count }}
                      </span>
                    </button>
                  </nav>
                </div>
              </div>

              <!-- Notifications List -->
              <div class="space-y-1">
                <div class="bg-white rounded-2xl">
                  <div
                    *ngFor="let notification of filteredNotifications; let i = index; let last = last; trackBy: trackByNotificationId"
                    (click)="markAsRead(notification)"
                    [class]="notification.status === 'unread' ? 'bg-white border-l-4 border-l-orange-500 shadow-sm' : 'bg-white'"
                    class="border border-orange-100 p-4 hover:shadow-lg transition-all duration-200 cursor-pointer group hover:bg-orange-50 hover:bg-opacity-75"
                    [ngClass]="{'rounded-t-2xl': i === 0, 'rounded-b-2xl': last}">

                    <div class="flex items-start space-x-3">
                      <!-- Notification Icon -->
                      <div class="flex-shrink-0">
                        <div
                          [class]="getNotificationIconClass(notification.type)"
                          class="w-10 h-10 rounded-full flex items-center justify-center">
                          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2"
                              [attr.d]="getNotificationIconPath(notification.type)">
                            </path>
                          </svg>
                        </div>
                      </div>

                      <!-- Notification Content -->
                      <div class="flex-1 min-w-0">
                        <div class="flex items-start justify-between">
                          <div class="flex-1">
                            <p
                              [class]="notification.status === 'unread' ? 'font-bold text-slate-800' : 'font-medium text-slate-700'"
                              class="text-sm">
                              {{ notification.title }}
                            </p>
                            <p class="text-sm text-slate-600 mt-1 line-clamp-2">
                              {{ notification.message }}
                            </p>

                            <!-- Metadata -->
                            <div *ngIf="notification.metadata" class="mt-2 flex flex-wrap gap-2 text-xs text-slate-500">
                              <span *ngIf="notification.metadata.jobTitle"
                                class="inline-flex items-center px-2 py-1 rounded-md bg-orange-100 text-orange-700">
                                {{ notification.metadata.jobTitle }}
                              </span>
                              <span *ngIf="notification.metadata.companyName"
                                class="inline-flex items-center px-2 py-1 rounded-md bg-orange-100 text-orange-700">
                                {{ notification.metadata.companyName }}
                              </span>
                              <span *ngIf="notification.metadata.studentName"
                                class="inline-flex items-center px-2 py-1 rounded-md bg-orange-100 text-orange-700">
                                {{ notification.metadata.studentName }}
                              </span>
                              <span *ngIf="notification.metadata.testName"
                                class="inline-flex items-center px-2 py-1 rounded-md bg-orange-100 text-orange-700">
                                {{ notification.metadata.testName }}
                              </span>
                              <span *ngIf="notification.metadata.sessionDate"
                                class="inline-flex items-center px-2 py-1 rounded-md bg-orange-100 text-orange-700">
                                {{ notification.metadata.sessionDate }}
                              </span>
                            </div>
                          </div>

                          <!-- Timestamp and Status -->
                          <div class="flex flex-col items-end space-y-2 ml-4">
                            <span class="text-xs text-slate-500 whitespace-nowrap">
                              {{ getRelativeTime(notification.timestamp) }}
                            </span>
                            <div
                              *ngIf="notification.status === 'unread'"
                              class="w-2 h-2 bg-orange-500 rounded-full">
                            </div>
                          </div>
                        </div>

                        <!-- Action Button -->
                        <div *ngIf="notification.actionText && notification.actionUrl" class="mt-3">
                          <button
                            (click)="handleNotificationAction(notification, $event)"
                            class="inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-lg text-orange-700 bg-orange-100 hover:bg-orange-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-colors">
                            {{ notification.actionText }}
                            <svg class="ml-1 w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Empty State -->
                <div *ngIf="filteredNotifications.length === 0"
                  class="text-center py-12">
                  <div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-8 h-8 text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M15 17h5l-5 5v-5z"></path>
                    </svg>
                  </div>
                  <h3 class="text-lg font-semibold text-slate-800 mb-2">{{ 'NOTIFICATIONS.NO_NOTIFICATIONS' | translate }}</h3>
                  <p class="text-slate-500">
                    {{ activeFilter === 'all' ? ('NOTIFICATIONS.ALL_CAUGHT_UP' | translate) : ('NOTIFICATIONS.NO_FILTER_NOTIFICATIONS' | translate: {filter: activeFilter}) }}
                  </p>
                </div>
              </div>

              <!-- Load More Button -->
              <div *ngIf="hasMoreNotifications" class="text-center mt-8">
                <button
                  (click)="loadMoreNotifications()"
                  [disabled]="isLoadingMore"
                  class="inline-flex items-center px-6 py-3 border border-orange-200 shadow-sm text-sm font-medium rounded-lg text-slate-700 bg-white hover:bg-orange-100 hover:bg-opacity-75 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
                  <svg *ngIf="isLoadingMore" class="animate-spin -ml-1 mr-2 h-4 w-4 text-gray-500" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                  </svg>
                  {{ isLoadingMore ? ('NOTIFICATIONS.LOADING' | translate) : ('NOTIFICATIONS.LOAD_MORE' | translate) }}
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
